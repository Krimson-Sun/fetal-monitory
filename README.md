# Fetal Monitoring System

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–ª–æ–¥–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø–∞—Ç–æ–ª–æ–≥–∏–π.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

Fetal Monitoring System - —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä–¥–∏–æ—Ç–æ–∫–æ–≥—Ä–∞—Ñ–∏–∏ (–ö–¢–ì) –ø–ª–æ–¥–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –æ—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, –≤—ã–ø–æ–ª–Ω—è–µ—Ç ML-–∏–Ω—Ñ–µ—Ä–µ–Ω—Å –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ WebSocket –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä **–†–µ–∞–ª-—Ç–∞–π–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ß–°–° –∏ –º–∞—Ç–æ—á–Ω—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π —Å —á–∞—Å—Ç–æ—Ç–æ–π 4Hz
- üß† **ML –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è** - –ê–Ω—Å–∞–º–±–ª—å CatBoost –º–æ–¥–µ–ª–µ–π –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–∞ –ø–∞—Ç–æ–ª–æ–≥–∏–π
- üìà **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç STV, LTV, baseline, –∞–∫—Å–µ–ª–µ—Ä–∞—Ü–∏–π/–¥–µ—Ü–µ–ª–µ—Ä–∞—Ü–∏–π
- üîå **WebSocket —Å—Ç—Ä–∏–º** - –ù–∏–∑–∫–æ–ª–∞—Ç–µ–Ω—Ç–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- üíæ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- üìÅ **Offline –∞–Ω–∞–ª–∏–∑** - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ CSV —Ñ–∞–π–ª–æ–≤
- üìù **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - Swagger UI –¥–ª—è –≤—Å–µ—Ö REST endpoints

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 6 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Emulator  ‚îÇ (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ gRPC
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Data Receiver (Go)                ‚îÇ
‚îÇ  ‚Ä¢ –ü—Ä–∏–µ–º —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (gRPC)                 ‚îÇ
‚îÇ  ‚Ä¢ –ë–∞—Ç—á–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö                           ‚îÇ
‚îÇ  ‚Ä¢ WebSocket Hub                            ‚îÇ
‚îÇ  ‚Ä¢ Session Management                       ‚îÇ
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îò
   ‚îÇ gRPC                                    ‚îÇ WebSocket
   ‚ñº                                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Feature          ‚îÇ                  ‚îÇ  Frontend   ‚îÇ
‚îÇ Extractor (Py)   ‚îÇ                  ‚îÇ  (Browser)  ‚îÇ
‚îÇ  ‚Ä¢ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è    ‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ  ‚Ä¢ STV/LTV       ‚îÇ
‚îÇ  ‚Ä¢ –°–æ–±—ã—Ç–∏—è       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ Features
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ML Service (Py) ‚îÇ
‚îÇ  ‚Ä¢ CatBoost      ‚îÇ
‚îÇ  ‚Ä¢ Prediction    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PostgreSQL     ‚îÇ     ‚îÇ      Redis       ‚îÇ
‚îÇ  (Persistence)   ‚îÇ     ‚îÇ     (Cache)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Offline Service  ‚îÇ (CSV –∞–Ω–∞–ª–∏–∑)
‚îÇ      (Go)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

#### 1. **Data Receiver** (Go)
- **–ü–æ—Ä—Ç—ã**: 50051 (gRPC), 8080 (HTTP/WebSocket)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–∏–µ–º —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤/—ç–º—É–ª—è—Ç–æ—Ä–∞
  - –ë–∞—Ç—á–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –±–∞—Ç—á–µ–π –≤ Feature Extractor
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ (Redis + PostgreSQL)
  - REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Go 1.24, gRPC, WebSocket, Redis, PostgreSQL

#### 2. **Feature Extractor** (Python)
- **–ü–æ—Ä—Ç**: 50052 (gRPC)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
  - –†–∞—Å—á–µ—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫ (STV, LTV, baseline)
  - –î–µ—Ç–µ–∫—Ü–∏—è –∞–∫—Å–µ–ª–µ—Ä–∞—Ü–∏–π –∏ –¥–µ—Ü–µ–ª–µ—Ä–∞—Ü–∏–π
  - –î–µ—Ç–µ–∫—Ü–∏—è –º–∞—Ç–æ—á–Ω—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π
  - –†–∞—Å—á–µ—Ç —Ç—Ä–µ–Ω–¥–æ–≤
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Python 3.11, gRPC, NumPy, Pandas, SciPy

#### 3. **ML Service** (Python)
- **–ü–æ—Ä—Ç**: 50053 (gRPC)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∏–∑ Feature Extractor
  - –ò–Ω—Ñ–µ—Ä–µ–Ω—Å –Ω–∞ –∞–Ω—Å–∞–º–±–ª–µ CatBoost –º–æ–¥–µ–ª–µ–π
  - –í–æ–∑–≤—Ä–∞—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø–∞—Ç–æ–ª–æ–≥–∏–∏ (0.0-1.0)
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Python 3.11, gRPC, CatBoost, PyTorch, Pandas

#### 4. **Offline Service** (Go)
- **–ü–æ—Ä—Ç**: 8081 (HTTP)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ó–∞–≥—Ä—É–∑–∫–∞ CSV —Ñ–∞–π–ª–æ–≤
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Feature Extractor –∏ ML Service
  - REST API —Å Swagger UI
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Go 1.24, gRPC clients, Swagger

#### 5. **Emulator** (Go)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ß—Ç–µ–Ω–∏–µ CSV —Ñ–∞–π–ª–æ–≤ —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  - –°—Ç—Ä–∏–º–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –≤ Data Receiver
  - –°–∏–º—É–ª—è—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Go 1.24, gRPC

#### 6. **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
- **PostgreSQL** - –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –∏ –¥–∞–Ω–Ω—ã—Ö
- **Redis** - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –∏ –º–µ—Ç—Ä–∏–∫

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∞–ª-—Ç–∞–π–º —Ä–µ–∂–∏–º

```
1. Emulator ‚Üí Data Receiver (gRPC)
   –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ—á–µ–∫ FHR –∏ UC —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

2. Data Receiver ‚Üí Feature Extractor (gRPC)
   –ë–∞—Ç—á–∏ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 250–º—Å (4Hz)

3. Feature Extractor ‚Üí Data Receiver (gRPC Response)
   –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ + –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

4. Data Receiver ‚Üí ML Service (gRPC, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
   –ü—Ä–∏–∑–Ω–∞–∫–∏ –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è

5. ML Service ‚Üí Data Receiver (gRPC Response)
   –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–∞—Ç–æ–ª–æ–≥–∏–∏

6. Data Receiver ‚Üí Frontend (WebSocket, 4Hz)
   –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ + –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–µ–¥–∏–∫—Ç
```

**–í–∞–∂–Ω–æ**: WebSocket –ø–∞–∫–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π 4Hz —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º ML –ø—Ä–µ–¥–∏–∫—Ç–∞. –ü—Ä–µ–¥–∏–∫—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–æ –º–µ—Ä–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫.

## üöÄ –î–µ–ø–ª–æ–π

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Docker** >= 20.10
- **Docker Compose** >= 2.0
- **Go** >= 1.24 (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **Python** >= 3.11 (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **protoc** >= 3.20 (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ proto —Ñ–∞–π–ª–æ–≤)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <repository-url>
cd fetal-monitory
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ Docker Compose**
```bash
docker-compose up --build
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:
- PostgreSQL (–ø–æ—Ä—Ç 5432)
- Redis (–ø–æ—Ä—Ç 6379)
- Feature Extractor (–ø–æ—Ä—Ç 50052)
- ML Service (–ø–æ—Ä—Ç 50053)
- Data Receiver (–ø–æ—Ä—Ç 50051, 8080)
- Offline Service (–ø–æ—Ä—Ç 8081)
- Stream Emulator (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö)
- Frontend (–ø–æ—Ä—Ç 3000)

3. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å: `http://localhost:3000`
- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: `ws://localhost:8080/ws?session_id=<your-session-id>`
- Swagger UI (Data Receiver): http://localhost:8080/swagger/
- Swagger UI (Offline Service): http://localhost:8081/swagger/

### –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

#### Data Receiver
```bash
cd receiver
go run cmd/receiver/main.go
```

#### Feature Extractor
```bash
cd feature_extractor
pip install -r requirements.txt
python grpc_server.py
```

#### ML Service
```bash
cd ml_service
pip install -r requirements.txt
python grpc_server.py
```

#### Offline Service
```bash
cd offline-service
go run cmd/server/main.go
```

#### Emulator
```bash
cd emulator
go run cmd/server/main.go
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –°–º. `docker-compose.yml` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Data Receiver:

```bash
GRPC_PORT=50051                    # gRPC –ø–æ—Ä—Ç
HTTP_PORT=8080                     # HTTP/WebSocket –ø–æ—Ä—Ç
BATCH_MAX_SAMPLES=2                # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞
BATCH_MAX_SPAN_MS=250             # –ß–∞—Å—Ç–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–∞—Ç—á–µ–π (4Hz)
FLUSH_INTERVAL_MS=250             # –ò–Ω—Ç–µ—Ä–≤–∞–ª —Ñ–ª–∞—à–∞
FEATURE_EXTRACTOR_ADDR=feature-extractor:50052
ML_SERVICE_ADDR=ml-service:50053
REDIS_ADDR=redis:6379
POSTGRES_DSN=postgres://fetal_user:fetal_pass@postgres:5432/fetal_monitor
SESSION_DATA_TTL_SECONDS=86400    # TTL –¥–ª—è —Å–µ—Å—Å–∏–π –≤ Redis
```

## üì° API

### Data Receiver REST API

#### –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é
```bash
POST /sessions
Content-Type: application/json

{
  "patient_id": "P001",
  "doctor_id": "D001",
  "facility_id": "F001",
  "notes": "Regular checkup"
}
```

#### –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é
```bash
GET /sessions/{session_id}
```

#### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏—é
```bash
POST /sessions/{session_id}/stop
```

#### –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Å—Å–∏—é –≤ –ë–î
```bash
POST /sessions/{session_id}/save
Content-Type: application/json

{
  "notes": "Additional notes"
}
```

#### –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π
```bash
GET /sessions?limit=10&offset=0
```

### WebSocket

```javascript
const ws = new WebSocket('ws://localhost:8080/ws?session_id=<session-id>');

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('Prediction:', data.prediction);
  console.log('Records:', data.records);
};
```

**–§–æ—Ä–º–∞—Ç WebSocket —Å–æ–æ–±—â–µ–Ω–∏—è:**
```json
{
  "message": "Batch processed successfully",
  "prediction": 0.234,
  "session_id": "uuid",
  "status": "processed",
  "records": {
    "stv": 5.2,
    "ltv": 12.3,
    "baseline_heart_rate": 142.5,
    "accelerations": [...],
    "decelerations": [...],
    "contractions": [...],
    "stvs": [5.1, 5.2, 5.3],
    "ltvs": [12.1, 12.3],
    "filtered_bpm_batch": {
      "time_sec": [0, 0.25, 0.5],
      "value": [140, 142, 141]
    },
    "filtered_uterus_batch": {
      "time_sec": [0, 0.25, 0.5],
      "value": [10, 15, 12]
    }
  }
}
```

### Offline Service REST API

–°–º. Swagger UI: http://localhost:8081/swagger/

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CSV —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `data/`:
   - `data/fhr.csv` - –¥–∞–Ω–Ω—ã–µ –ß–°–°
   - `data/uc.csv` - –¥–∞–Ω–Ω—ã–µ –º–∞—Ç–æ—á–Ω—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:
```bash
docker-compose up
```

3. –≠–º—É–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SESSION_ID –¥–ª—è —ç–º—É–ª—è—Ç–æ—Ä–∞

```bash
SESSION_ID=my-test-session docker-compose up stream-emulator
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
fetal-monitory/
‚îú‚îÄ‚îÄ data/                      # –¢–µ—Å—Ç–æ–≤—ã–µ CSV —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ fhr.csv
‚îÇ   ‚îî‚îÄ‚îÄ uc.csv
‚îú‚îÄ‚îÄ emulator/                  # Go —ç–º—É–ª—è—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ feature_extractor/         # Python —Å–µ—Ä–≤–∏—Å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ collector.py
‚îÇ   ‚îú‚îÄ‚îÄ preprocessor.py
‚îÇ   ‚îú‚îÄ‚îÄ grpc_server.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ ml_service/                # Python ML —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ collector.py
‚îÇ   ‚îú‚îÄ‚îÄ inference.py
‚îÇ   ‚îú‚îÄ‚îÄ grpc_server.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ weights/               # CatBoost –º–æ–¥–µ–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ catboost_kfold_0.cbm
‚îÇ       ‚îú‚îÄ‚îÄ catboost_kfold_1.cbm
‚îÇ       ‚îî‚îÄ‚îÄ catboost_kfold_2.cbm
‚îú‚îÄ‚îÄ offline-service/           # Go —Å–µ—Ä–≤–∏—Å –¥–ª—è CSV –∞–Ω–∞–ª–∏–∑–∞
‚îÇ   ‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ docs/                  # Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ receiver/                  # Go —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ batch/            # –ë–∞—Ç—á–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ health/           # Health checks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ server/           # gRPC —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ session/          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ websocket/        # WebSocket hub
‚îÇ   ‚îú‚îÄ‚îÄ docs/                 # Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ proto/                     # Protocol Buffers –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ feature_extractor/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ feature_extractor.proto
‚îÇ   ‚îú‚îÄ‚îÄ ml_service/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ml_service.proto
‚îÇ   ‚îî‚îÄ‚îÄ telemetry/
‚îÇ       ‚îî‚îÄ‚îÄ telemetry.proto
‚îú‚îÄ‚îÄ migrations/                # SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è PostgreSQL
‚îÇ   ‚îî‚îÄ‚îÄ 001_init.sql
‚îú‚îÄ‚îÄ docker-compose.yml         # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ Makefile
‚îî‚îÄ‚îÄ README.md
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è proto —Ñ–∞–π–ª–æ–≤

#### Go
```bash
cd proto/feature_extractor
protoc --go_out=. --go-grpc_out=. --go_opt=paths=source_relative --go-grpc_opt=paths=source_relative feature_extractor.proto

cd ../ml_service
protoc --go_out=. --go-grpc_out=. --go_opt=paths=source_relative --go-grpc_opt=paths=source_relative ml_service.proto

cd ../telemetry
protoc --go_out=. --go-grpc_out=. --go_opt=paths=source_relative --go-grpc_opt=paths=source_relative telemetry.proto
```

#### Python (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Dockerfile)
```bash
cd feature_extractor
python -m grpc_tools.protoc --python_out=. --grpc_python_out=. --proto_path=../proto/feature_extractor ../proto/feature_extractor/feature_extractor.proto

cd ../ml_service
python -m grpc_tools.protoc --python_out=. --grpc_python_out=. --proto_path=../proto/ml_service ../proto/ml_service/ml_service.proto
```

### Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger –¥–ª—è Go —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
cd receiver
swag init -g cmd/receiver/main.go -o docs

cd ../offline-service
swag init -g cmd/server/main.go -o docs
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Checks

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–º–µ—é—Ç health check endpoints:

```bash
# Data Receiver
curl http://localhost:8080/health

# Offline Service
curl http://localhost:8081/health

# gRPC health checks
grpcurl -plaintext localhost:50051 grpc.health.v1.Health/Check
grpcurl -plaintext localhost:50052 grpc.health.v1.Health/Check
grpcurl -plaintext localhost:50053 grpc.health.v1.Health/Check
```

### –õ–æ–≥–∏

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose logs -f data-receiver
docker-compose logs -f ml-service
docker-compose logs -f feature-extractor
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request


## üë• –ê–≤—Ç–æ—Ä—ã

–¢–∏–º—É—Ä –ü—à–∏–Ω—à–µ–≤

–ú–∞—Ä–∏–Ω–∞ –°–∞–≤–æ–≤–∏—á–µ–≤–∞

–î–µ–Ω–∏—Å –ì—Ä–∏–¥—É—Å–æ–≤

–î–º–∏—Ç—Ä–∏–π –ö–æ–º—è–≥–∏–Ω

–î–º–∏—Ç—Ä–∏–π –ß–µ—Ä–∫–∞—à–∏–Ω

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

timurpshinshev@gmail.com
krimson.sun@yandex.ru

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- CatBoost team –∑–∞ –æ—Ç–ª–∏—á–Ω—É—é ML –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- gRPC community
- Go –∏ Python communities

